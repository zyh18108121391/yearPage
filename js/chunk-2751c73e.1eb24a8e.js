(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2751c73e"],{"0815":function(t,e,s){"use strict";s("ebb2")},"162e":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-warrper"},[s("slier-header"),s("div",{staticClass:"main-container"},[s("Slider"),s("div",{staticClass:"app-container"},[s("keep-alive",[t.$route.meta.keepAlive?s("router-view"):t._e()],1),t.$route.meta.keepAlive?t._e():s("router-view")],1)],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slider-aside-out"},[s("div",{staticClass:"box"},[s("div",{staticClass:"slider-aside"},[s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path},on:{select:t.handleSelect}},t._l(t.menus,(function(t){return s("slider-item",{key:t.name,attrs:{item:t,path:t.path}})})),1)],1)])])},a=[],l=(s("4160"),s("c975"),s("159b"),s("5530")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.item.children&&1!=t.item.children.length?s("el-submenu",{attrs:{index:t.path}},[s("template",{slot:"title"},[t.item.icon?s("i",{staticClass:"iconfont",class:t.item.icon}):t._e(),s("span",[t._v(t._s(t.item.meta.title))])]),t._l(t.item.children,(function(t){return s("sliderItem",{key:t.path,attrs:{item:t,path:t.path}})}))],2):s("el-menu-item",{attrs:{index:t.path}},[t.item.icon?s("i",{staticClass:"iconfont",class:t.item.icon}):t._e(),s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.item.meta.title))])])],1)},r=[],d={name:"sliderItem",data:function(){return{msg:"Welcome to Your Vue.js App",preDom:""}},props:["path","item"],methods:{}},u=d,m=(s("0815"),s("2877")),p=Object(m["a"])(u,c,r,!1,null,"b29a3656",null),h=p.exports,f=(s("a18c"),s("2f62")),w={components:{SliderItem:h},name:"layout",data:function(){return{}},computed:Object(l["a"])({},Object(f["c"])({menus:function(t){return t.permission.menuItems}})),mounted:function(){var t=document.querySelectorAll(".el-menu-item"),e=function(t){return t.parentNode.parentNode.parentNode};t.forEach((function(t){-1!==e(t).className.indexOf("el-submenu")&&(-1!==e(e(t)).className.indexOf("el-submenu")?t.setAttribute("style","padding-left:0.3rem"):t.setAttribute("style","padding-left:0.2rem"))}));var s=document.querySelectorAll(".el-submenu__title");s.forEach((function(t){t.setAttribute("style","padding-left:0.2rem"),-1===e(t).parentNode.className.indexOf("slider-aside")&&t.setAttribute("style","font-size:0.16rem")}))},methods:{handleSelect:function(t,e){this.$router.push({path:e[e.length-1]})}}},b=w,v=(s("eea6"),Object(m["a"])(b,i,a,!1,null,"f3fcfa10",null)),g=v.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fixed-header"},[s("div",{staticClass:"navbar"},[s("div",{staticClass:"logo"},[s("svg-icon",{attrs:{"icon-class":"logo","class-name":"logo-img"}})],1),s("span",{ref:"pointSpan",staticClass:"point-text"},[t._v(t._s(t.nowPointLabel))]),"jd"==t.nowRole?s("div",{staticClass:"right-menu"},[s("div",{staticClass:"right-menu-item crew"},[t._v(t._s(t.team))]),s("i",{staticClass:"right-menu-item el-icon-message-solid",staticStyle:{color:"#909CB1"}}),s("div",{staticClass:"head-img"}),s("div",{staticClass:"select-names",style:"width:"+t.pointBoxWidth+"px"},[s("el-select",{on:{change:t.handPoint},model:{value:t.nowPoint,callback:function(e){t.nowPoint=e},expression:"nowPoint"}},t._l(t.options,(function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-s-tools"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"iconfont cl-icon-logonout logout",attrs:{command:"changePassword"}},[s("span",[t._v("修改密码")])]),s("el-dropdown-item",{staticClass:"iconfont cl-icon-logonout logout",attrs:{command:"logout"}},[s("span",[t._v("登出")])])],1)],1)],1):s("div",{staticClass:"right-menu"},[s("div",{staticClass:"head-img"}),s("div",{staticClass:"right-menu-item crew margin-right"},[t._v(" "+t._s(t.nickName)+" ")]),s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("i",{staticClass:"el-icon-s-tools"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"iconfont cl-icon-logonout logout",attrs:{command:"changePassword"}},[s("span",[t._v("修改密码")])]),s("el-dropdown-item",{staticClass:"iconfont cl-icon-logonout logout",attrs:{command:"logout"}},[s("span",[t._v("登出")])])],1)],1)],1)]),s("ModelPassword",{attrs:{show:this.showModel,loading:t.loading},on:{submit:t.submit}})],1)},_=[],O=(s("caad"),s("d81d"),s("b0c0"),s("2532"),s("3191"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{"append-to-body":"",title:"修改密码","custom-class":"cusDialog",visible:t.show,width:"4.4rem","before-close":t.handleClose},on:{"update:visible":function(e){t.show=e}}},[s("el-form",{ref:"form",staticClass:"form",attrs:{model:t.selectedObj,rules:t.rules}},[s("div",{staticClass:"li"},[s("div",{staticClass:"item"},[s("el-form-item",{attrs:{prop:"oldPassword"}},[s("div",{staticClass:"label"},[s("span",{staticClass:"important"},[t._v("*")]),t._v("旧密码：")]),s("el-input",{attrs:{type:"password",placeholder:"请输入当前登录密码"},model:{value:t.selectedObj.oldPassword,callback:function(e){t.$set(t.selectedObj,"oldPassword",e)},expression:"selectedObj.oldPassword"}})],1)],1)]),s("div",{staticClass:"li"},[s("div",{staticClass:"item"},[s("el-form-item",{attrs:{prop:"newPassword"}},[s("div",{staticClass:"label"},[s("span",{staticClass:"important"},[t._v("*")]),t._v("新密码：")]),s("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.selectedObj.newPassword,callback:function(e){t.$set(t.selectedObj,"newPassword",e)},expression:"selectedObj.newPassword"}})],1)],1)]),s("div",{staticClass:"li"},[s("div",{staticClass:"item"},[s("el-form-item",{attrs:{prop:"newCopy"}},[s("div",{staticClass:"label"},[s("span",{staticClass:"important"},[t._v("*")]),t._v("新密码：")]),s("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:t.selectedObj.newCopy,callback:function(e){t.$set(t.selectedObj,"newCopy",e)},expression:"selectedObj.newCopy"}})],1)],1)])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提 交")]),s("el-button",{on:{click:t.handleClose}},[t._v("关 闭")])],1)],1)}),P=[],j=(s("5c96"),s("ed08")),y={props:{show:{type:Boolean,default:!1},loading:Boolean},data:function(){var t=this;return{rules:{oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],newCopy:[{validator:function(e,s,n){""===s?n(new Error("请再次输入新密码")):s!==t.selectedObj.newPassword?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}]},selectedObj:{}}},methods:{parseTime:j["l"],handleClose:function(){this.$emit("submit")},submit:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.selectedObj.confirmPassword=t.selectedObj.newPassword,t.$emit("submit",t.selectedObj))}))}}},k=y,x=(s("7529"),Object(m["a"])(k,O,P,!1,null,"08034053",null)),$=x.exports,S=s("01ea"),N=s("4360"),A={name:"slierHeader",components:{ModelPassword:$},data:function(){return{nowPoint:"",nowPointLabel:"",options:[],pointBoxWidth:0,nowRole:"",showModel:!1,loading:!1}},computed:Object(l["a"])({},Object(f["c"])({userId:function(t){return t.user.userId},team:function(t){return t.user.team},points:function(t){return t.user.points},roles:function(t){return t.user.roles},nickName:function(t){return t.user.nickName}})),watch:{points:{deep:!0,handler:function(t){this.initOptions()}}},created:function(){this.nowRole=this.roles,this.roles&&this.roles.length>0&&(this.roles.includes(S["a"].finance)||this.roles.includes(S["a"].yw)||this.roles.includes(S["a"].marketer))?this.nowRole="yw":this.nowRole="jd",this.initOptions()},mounted:function(){var t=this;N["a"].dispatch("GetPoints").then((function(t){})),N["a"].dispatch("GetDetail").then((function(t){})),this.$nextTick((function(){t.setWith()}))},updated:function(){var t=this;this.$nextTick((function(){t.setWith()}))},methods:Object(l["a"])(Object(l["a"])({},Object(f["b"])(["LogOut","ResetPwd"])),{},{setWith:function(){var t=this.$refs["pointSpan"].clientWidth;this.pointBoxWidth=t+50},initOptions:function(){var t=this;this.options.length=0,this.points&&this.points.map((function(e){1==e.alive&&(t.nowPoint=e.code,t.nowPointLabel=e.name),t.options.push({label:e.name,value:e.code})}))},handPoint:function(t){N["a"].dispatch("changPoint",{jpcode:this.nowPoint}).then((function(t){window.location.reload()}))},handleCommand:function(t){var e=this;"logout"===t?this.$confirm("是否确认登出？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.LogOut().then((function(){location.reload()}))})):"changePassword"===t&&(this.showModel=!0)},submit:function(t){var e=this;if(t){this.loading=!0;var s=Object(l["a"])({},t);delete s.newCopy,this.ResetPwd(t).then((function(t){e.loading=!1,e.$message({type:"success",message:"修改成功,即将跳转到登录页"}),setTimeout((function(){window.location.reload()}),1500)})).catch((function(t){e.loading=!1}))}else this.showModel=!1}})},E=A,B=(s("b6f5"),Object(m["a"])(E,C,_,!1,null,"eff9032a",null)),W=B.exports,R={name:"layout",components:{Slider:g,SlierHeader:W},data:function(){return{collapse:!0}}},I=R,M=(s("aa18"),Object(m["a"])(I,n,o,!1,null,"5eacb75e",null));e["default"]=M.exports},"40fb":function(t,e,s){},7529:function(t,e,s){"use strict";s("c630")},a1ab:function(t,e,s){},aa18:function(t,e,s){"use strict";s("40fb")},b5ea:function(t,e,s){},b6f5:function(t,e,s){"use strict";s("a1ab")},c630:function(t,e,s){},ebb2:function(t,e,s){},eea6:function(t,e,s){"use strict";s("b5ea")}}]);
//# sourceMappingURL=chunk-2751c73e.1eb24a8e.js.map