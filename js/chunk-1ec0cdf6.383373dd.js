(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ec0cdf6"],{"1f66":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAjklEQVQ4EWP84Fq69f///14MZABGRsZtTORqBtkH0ssCs1hwTw8jjE0M/d6l5D9IHRMxivGpodgAuBeQbcEWsKAAE9jd7Y2sDsTG6gJsAYtNDKcB6Lbg42N1AT4N6HK0MQAUYOg2AflbsYgxYI0FbKGNTTNIjDZewGUbNnFGWJrGJkmMGBOOACNGL0jNVgBBgibD9md+zAAAAABJRU5ErkJggg=="},4307:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"home commpage"},[s("div",{staticClass:"person-top"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix common-pfc",attrs:{slot:"header"},slot:"header"},[s("span",[a._v("计量装置通信状态")])]),s("div",{staticClass:"person-head"},[s("div",[s("div",[a._v("计量点总数")]),s("div",{staticClass:"black-color"},[a._v(a._s(a.personObj.total)+" 个")])]),s("div",[s("div",[a._v("在线数量")]),s("div",{staticClass:"green-color"},[a._v(a._s(a.personObj.live)+" 个")])]),s("div",[s("div",[a._v("离线数量")]),s("div",{staticClass:"mid-color"},[a._v(a._s(a.personObj.dead)+" 个")])]),s("div",[s("div",[a._v("当季变更次数")]),s("div",{staticClass:"mid-color"},[a._v(a._s(a.personObj.change)+" 次")])])])])],1),s("div",{staticClass:"common-flex"},[s("div",{staticClass:"flex-big"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"common-pfc"},[a._v("电量总览 "),s("i",{staticClass:"small-size"},[a._v("(kW·h）")])])]),s("div",{staticClass:"card-box"},a._l(a.powerList,(function(t,e,i){return s("div",{key:t.label,staticClass:"power-item"},[s("div",{staticClass:"power-position",class:t.class},[s("div",{staticClass:"black-color big-size common-pfc",attrs:{title:t.value+" kW·h"}},[a._v(" "+a._s(a._f("changeUnit")(t.value?t.value:"-"))+" "),s("span",{staticClass:"mid-size"},[a._v(" "+a._s(t.value>=1e6&&t.value<1e8?"万":t.value>1e8?"亿":"")+"kW·h ")])]),s("div",{staticClass:"light-color mid-size"},[a._v(a._s(t.label))])])])})),0)])],1),s("div",{staticClass:"flex-small"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"common-pfc"},[a._v("尖峰谷平电量")]),s("div",{staticClass:"peak-select"},[s("el-select",{attrs:{"popper-append-to-body":!1},on:{change:a.handJf},model:{value:a.jfDay,callback:function(t){a.jfDay=t},expression:"jfDay"}},a._l(a.dayOptions,(function(a){return s("el-option",{key:a.label,attrs:{label:a.label,value:a.value}})})),1)],1)]),s("div",{staticClass:"peak-box"},[s("div",{staticClass:"pers-peck-left"},[s("LineChart",{attrs:{"class-name":"peak-pie",id:"peakChart","char-type":"pie","chart-data":a.pieCharData}})],1),s("div",{staticClass:"peck-right"},[s("div",{staticClass:"peck-item"},[s("div",{staticClass:"light-color mid-size"},[s("img",{staticClass:"monitor",attrs:{src:e("775a"),alt:""}}),a._v(" 尖电量 ")]),s("div",{staticClass:"black-color big-size common-pfc jfitem",attrs:{title:a.jfObj.jQ+" kW·h"}},[a._v(" "+a._s(a._f("changeUnit")(a.jfObj.jQ?a.jfObj.jQ:"-"))+" "),s("span",{staticClass:"mid-size"},[a._v(" "+a._s(a.jfObj.jQ>=1e6&&a.jfObj.jQ<1e8?"万":a.jfObj.jQ>1e8?"亿":"")+"kW·h ")])])]),s("div",{staticClass:"peck-item"},[s("div",{staticClass:"light-color mid-size"},[s("img",{staticClass:"monitor",attrs:{src:e("8e30"),alt:""}}),a._v(" 峰电量 ")]),s("div",{staticClass:"black-color big-size common-pfc jfitem",attrs:{title:a.jfObj.fQ+" kW·h"}},[a._v(" "+a._s(a._f("changeUnit")(a.jfObj.fQ?a.jfObj.fQ:"-"))+" "),s("span",{staticClass:"mid-size"},[a._v(" "+a._s(a.jfObj.fQ>=1e6&&a.jfObj.fQ<1e8?"万":a.jfObj.fQ>1e8?"亿":"")+"kW·h ")])])]),s("div",{staticClass:"peck-item"},[s("div",{staticClass:"light-color mid-size"},[s("img",{staticClass:"monitor",attrs:{src:e("1f66"),alt:""}}),a._v(" 平电量 ")]),s("div",{staticClass:"black-color big-size common-pfc jfitem",attrs:{title:a.jfObj.pQ+" kW·h"}},[a._v(" "+a._s(a._f("changeUnit")(a.jfObj.pQ?a.jfObj.pQ:"-"))+" "),s("span",{staticClass:"mid-size"},[a._v(" "+a._s(a.jfObj.pQ>=1e6&&a.jfObj.pQ<1e8?"万":a.jfObj.pQ>1e8?"亿":"")+"kW·h ")])])]),s("div",{staticClass:"peck-item"},[s("div",{staticClass:"light-color mid-size"},[s("img",{staticClass:"monitor",attrs:{src:e("5fa5"),alt:""}}),a._v(" 谷电量 ")]),s("div",{staticClass:"black-color big-size common-pfc jfitem",attrs:{title:a.jfObj.gQ+" kW·h"}},[a._v(" "+a._s(a._f("changeUnit")(a.jfObj.gQ?a.jfObj.gQ:"-"))+" "),s("span",{staticClass:"mid-size"},[a._v(" "+a._s(a.jfObj.gQ>=1e6&&a.jfObj.gQ<1e8?"万":a.jfObj.gQ>1e8?"亿":"")+"kW·h ")])])])])])])],1),s("div",{staticClass:"flex-small"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"common-pfc"},[a._v("TOP5用电量")]),s("div",{staticClass:"peak-select"},[s("el-select",{attrs:{"popper-append-to-body":!1},on:{change:a.handTop},model:{value:a.topDay,callback:function(t){a.topDay=t},expression:"topDay"}},a._l(a.dayOptions,(function(a){return s("el-option",{key:a.label,attrs:{label:a.label,value:a.value}})})),1)],1)]),s("div",{staticClass:"card-box"},[s("LineChart",{attrs:{"class-name":"rankChart","char-type":"rank","chart-data":a.rankCharData}}),s("div",{staticClass:"rankBtns"},a._l(a.grpnames,(function(t,e,i){return s("span",{class:a.rankChecked===e?"rankChecked":"",on:{click:function(t){return a.handlGroup(e)}}},[a._v(a._s(t))])})),0)],1)])],1)]),s("div",{staticClass:"common-flex"},[s("div",{staticClass:"flex-big"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"common-pfc"},[a._v("电量趋势")]),s("div",{staticClass:"peak-select"},[s("el-select",{attrs:{"popper-append-to-body":!1},on:{change:a.handQs},model:{value:a.qsDay,callback:function(t){a.qsDay=t},expression:"qsDay"}},a._l(a.days,(function(a){return s("el-option",{key:a.label,attrs:{label:a.label,value:a.value}})})),1)],1)]),s("div",{staticClass:"peak-box card-bot"},[s("LineChart",{attrs:{"class-name":"trendChart","char-type":"bar","chart-data":a.trendCharData}}),s("div",{staticClass:"trendTag"},[s("span",[a._v("目标均值")]),s("span",[a._v("实际均值")])])],1)])],1),s("div",{staticClass:"flex-max"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"common-pfc"},[a._v(a._s(a.typeName)+" "),a.lineName?s("span",{staticStyle:{"font-size":"14px"}},[a._v("("+a._s(a.lineName)+")")]):a._e()]),s("div",{staticClass:"select-boxs"},[s("div",{staticClass:"monitor-select"},[s("el-select",{attrs:{filterable:"","value-key":"id","popper-append-to-body":!1},on:{change:a.handLine},model:{value:a.line,callback:function(t){a.line=t},expression:"line"}},a._l(a.lineOptions,(function(a){return s("el-option",{key:a.label,attrs:{label:a.name,value:a}})})),1)],1),s("div",{staticClass:"monitor-select"},[s("el-select",{attrs:{"popper-append-to-body":!1},on:{change:a.handlType},model:{value:a.type,callback:function(t){a.type=t},expression:"type"}},a._l(a.typeOptions,(function(a){return s("el-option",{key:a.label,attrs:{label:a.label,value:a.value}})})),1)],1)])]),s("div",{staticClass:"card-bot"},[s("LineChart",{attrs:{"class-name":"power","char-type":"line","chart-data":a.powerCharData}})],1)])],1)])])},i=[],l=(e("c975"),e("d81d"),e("45fc"),e("b0c0"),e("b680"),e("ade3")),A=e("5530"),n=e("313e"),r=e("81ac"),o=e("2f62"),c=e("c1df"),d=e.n(c),h=e("3191"),p={name:"personnel",components:{LineChart:r["a"]},data:function(){return{jfDay:"dimYwYear",topDay:"dimYwYear",qsDay:"dimYwYear",dayOptions:[{label:"日",value:"dimDay"},{label:"月",value:"dimYwMonth"},{label:"年",value:"dimYwYear"}],days:[{label:"月",value:"dimYwMonth"},{label:"年",value:"dimYwYear"}],overAll:{},dimYwYear:"",dimYwMonth:"",dimDay:"",jfObj:{},topData:{},rankChecked:"dim_company",grpnames:{dim_company:"公司",dim_line:"线路",dim_plat:"平台"},powerList:{today:{class:"powerBule",value:"",label:"当日电量"},wkzj:{class:"powerYellow",value:"",label:"钻井用电量"},yesterday:{class:"powerBule",value:"",label:"昨日电量"},wkyl:{class:"powerViolet",value:"",label:"压裂用电量"},month:{class:"powerBule",value:"",label:"当月电量"},wksc:{class:"powerRed",value:"",label:"生产用电量"}},pieCharData:{legend:[],colors:["#2E4AF7","#FF8C56","#EF4474","#713BDB"],series:[],index:""},rankCharData:{series:[],yAxis:[],xAxis:[],colors:["#6D81FA"]},trendCharData:{legend:[],dataRoomShow:!1,series:[],yAxis:[],xAxis:[],name:["kW·h"],formatter:"用电量 <br/>{b} : {c} ",colors:["#6D81FA"],mbAv:0,sjAv:0},personObj:{total:"",live:"",dead:"",change:""},lineOptions:[],line:null,typeOptions:[{label:"最大需量",value:"dmdmax"},{label:"有功负荷",value:"p"}],type:"dmdmax",powerCharData:{legend:[],xAxis:[],series:[],colors:["#2E4AF7","#FF8C56"],name:["kW"]},lineName:"",typeName:"最大需量"}},created:function(){this._getData()},computed:Object(A["a"])({},Object(o["c"])({userId:function(a){return a.user.userId},jp_code:function(a){return a.user.jp_code}})),mounted:function(){},methods:{_getData:function(){this.dimYwYear=d()().startOf("year").format("YYYY"),this.dimYwMonth=d()().startOf("minth").format("YYYY-MM"),this.dimDay=d()().format("YYYY-MM-DD"),this.getPersonInfo();var a={dimYwYear:this.dimYwYear};this.getDime(a,"jf");var t={dimYwYear:this.dimYwYear,top:5,grpname:this.rankChecked};this.getDime(t,"top"),this.personTrend(),this.getLines()},getPersonInfo:function(){var a=this;Object(h["k"])(this.userId).then((function(t){for(var e in a.personObj.total=t.jlzl&&t.jlzl.total?t.jlzl.total:"-",a.personObj.change=t.jlzl&&t.jlzl.total?t.jlzl.change:"-",a.personObj.dead=t.jlzl&&t.jlzl.total?t.jlzl.dead:"-",a.personObj.live=t.jlzl&&t.jlzl.total?t.jlzl.live:"-",a.overAll=t.dlzl,a.overAll)a.powerList.hasOwnProperty(e)&&(a.powerList[e].value=a.overAll[e]&&a.overAll[e].tQ?a.overAll[e].tQ:"-")}))},getDime:function(a,t){var e=this;Object(h["c"])(a).then((function(a){var s=a.data?a.data:[];if("jf"===t){var i={jQ:s[0].jQ,fQ:s[0].fQ,pQ:s[0].pQ,gQ:s[0].gQ};e.jfObj=i,e.initPieChart()}else e.topData=a.data,e.initRankChart()}))},personTrend:function(){var a,t=this,e="";"dimYwYear"===this.qsDay&&(e="dim_yw_month"),"dimYwMonth"===this.qsDay&&(e="dim_day");var s=(a={},Object(l["a"])(a,this.qsDay,this[this.qsDay]),Object(l["a"])(a,"grpname",e),a);Object(h["l"])(s).then((function(a){t.trendCharData.xAxis=[],t.trendCharData.yAxis=[],t.trendCharData.mbAv=0,t.trendCharData.sjAv=0,t.trendCharData.series=[],t.trendCharData.name[0]="kW·h",t.trendCharData.grid={right:24,bottom:20,left:24,top:68,containLabel:!0},t.trendCharData.mbAv=a.mbAv,t.trendCharData.sjAv=a.sjAv;var e=a.list.some((function(a){return a.tQ>=1e6&&a.tQ<1e8})),s=a.list.some((function(a){return a.tQ>=1e8}));a.list.map((function(i,l){t.trendCharData.xAxis.push(i.name);var A=i.tQ;s?(A=(i.tQ/1e8).toFixed(2),0===l&&(t.trendCharData.mbAv=(a.mbAv/1e8).toFixed(2),t.trendCharData.sjAv=(a.mbAv/1e8).toFixed(2)),t.trendCharData.name[0]="亿 kW·h"):e&&(A=(i.tQ/1e4).toFixed(2),0===l&&(t.trendCharData.mbAv=(a.mbAv/1e4).toFixed(2),t.trendCharData.sjAv=(a.mbAv/1e4).toFixed(2)),t.trendCharData.name[0]="万 kW·h"),t.trendCharData.yAxis.push(A)})),t.trendCharData.series.push({type:"bar",smooth:!0,data:t.trendCharData.yAxis,barWidth:12,markLine:{symbol:"none",label:{position:"middle"},data:[{type:"average",name:"目标均值",yAxis:t.trendCharData.mbAv,lineStyle:{color:"#FF8C56",type:"dashed"}},{name:"实际均值",yAxis:t.trendCharData.sjAv,lineStyle:{color:"#EF4474",type:"dashed"}}]}})}))},getLines:function(){var a=this;Object(h["e"])().then((function(t){a.lineOptions=t.data,a.line=t.data[0],a.lineName=t.data[0].name,a.getAnalyse()}))},handJf:function(){var a=Object(l["a"])({},this.jfDay,this[this.jfDay]);this.getDime(a,"jf")},handTop:function(){this.searTop()},handlGroup:function(a){this.rankChecked=a,this.searTop()},searTop:function(){var a,t=(a={},Object(l["a"])(a,this.topDay,this[this.topDay]),Object(l["a"])(a,"top",5),Object(l["a"])(a,"grpname",this.rankChecked),a);this.getDime(t,"top")},handQs:function(){this.personTrend()},initRankChart:function(){var a=this;this.rankCharData.series=[],this.rankCharData.yAxis=[],this.rankCharData.grid={right:120,bottom:5,left:24,top:74};var t=[];this.topData.sort((function(a,t){return a.tQ-t.tQ})),this.topData.map((function(e){a.rankCharData.yAxis.push(e.name),t.push(e.tQ)})),this.rankCharData.series=[{name:"用电量",type:"bar",barWidth:12,label:{normal:{show:!0,formatter:function(a){var t=a.data;return t>=1e6&&t<1e8?t=(t/1e4).toFixed(2)+" 万kW·h":t>1e8&&(t=(t/1e8).toFixed(2)+" 亿kW·h"),t},position:"right",valueAnimation:!0,fontSize:"0.18rem"}},data:t}]},initPieChart:function(){var a=this.jfObj,t=[{value:a.jQ,name:"尖电量"},{value:a.fQ,name:"峰电量"},{value:a.pQ,name:"平电量"},{value:a.gQ,name:"谷电量"}],e=[];t.map((function(a){e.push(a.value)}));var s=Math.max.apply(null,e);this.pieCharData.index=e.indexOf(s),this.pieCharData.series=[{name:"尖峰平谷分析",type:"pie",center:["50%","50%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold",formatter:"{d} %",color:"自适应"}},radius:["70%","90%"],data:t}]},initTrendChart:function(){var a=8;this.trendCharData.xAxis=["周一","周二1","周三","周四","周五","周六","周日"],this.trendCharData.series=[{name:"有功负荷",type:"bar",smooth:!0,data:[10,11,13,11,12,12,9],barWidth:12,markLine:{data:[{type:"average",name:"目标均值",label:"目标均值",lineStyle:{color:"#FF8C56",type:"dashed"}},{label:"实际均值",name:"实际均值",yAxis:a,lineStyle:{color:"#EF4474",type:"dashed"}}]}}]},handlType:function(){"dmdmax"===this.type?this.typeName="最大需量":this.typeName="有功负荷",this.getAnalyse()},handLine:function(){this.lineName=this.line.name,this.getAnalyse()},getAnalyse:function(){var a=this,t={gLine:this.line.code,index:this.type};Object(h["b"])(t).then((function(t){a.powerCharData.xAxis=[],a.powerCharData.series=[];var e=[];t.data&&t.data.list&&t.data.list.map((function(t){a.powerCharData.xAxis.push(t.date),e.push(t.value)})),t.data&&t.data.list>0?a.pieCharData.name=["kW"]:a.pieCharData.name=[],a.powerCharData.grid={right:24,bottom:20,left:24,top:68,containLabel:!0},a.powerCharData.series.push({name:a.lineName,symbol:"none",type:"line",itemStyle:{normal:{lineStyle:{width:3}}},areaStyle:{opacity:.2,color:new n["a"].LinearGradient(0,1,0,0,[{offset:0,color:"#d1e9fe"},{offset:1,color:"#5269f8"}])},smooth:!0,data:e})}))}},activated:function(){this._getData()},deactivated:function(){this.powerCharData.series=[],this.trendCharData.series=[],this.topData=[]}},m=p,v=(e("e4446"),e("2877")),f=Object(v["a"])(m,s,i,!1,null,"8a7d1f96",null);t["default"]=f.exports},"45aa":function(a,t,e){},"5fa5":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAkUlEQVQ4EWMssr6z9T/Dfy8GMgAjA+M2JnI1g+wD6WWBWdx/VJURxiaGLrS+/R+kjokYxfjUUGwA3AvItmALWFCA9R1V8UZWB2JjdQG2gMUmhtMAdFvw8bG6AJ8GdDnaGAAKMHSbGBgZt2KIAQWwxgK20MamGSRGGy/gsg2bOCMsTWOTJEaMCWuAEaMTpAYYsAD0ISCpG36wgwAAAABJRU5ErkJggg=="},"775a":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAh0lEQVQ4EbVTwQ3AIAgU00e7jIPovDqIy7Q/Kw8aQ07TaPQjnMDBEcmFJ5pSvJk5RImcv8tMruQcYuR0kdh/biG2f4JHMcsFvhFaFihsFSzHM7RxbOMO0FYQ1i2gaQY+7mCQoJ82FaiCaSYiihpjH24BqY2SGds0Qo8O4MufyRogGCCCEAv7AgpKHnCOwlGRAAAAAElFTkSuQmCC"},"8e30":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAi0lEQVQ4EbVSQQ6AIAzbiK/Tuz5En6EP0Tt+b24HDCGFLBi5wEq3bgWWY4kkMlLPYr5Dd7IJqvCQhHm7OJ09u+yzGC94yC3O5wLvCLkKNFYN4/Wccp6dcQfoVRBWLVDKNGLcQSOhvPqpgBpWKmkcAUbwFZDbKNmwn0aoyQGc058Gdy4oEDbMlayk+AATjiD/JjHXUAAAAABJRU5ErkJggg=="},e4446:function(a,t,e){"use strict";e("45aa")}}]);
//# sourceMappingURL=chunk-1ec0cdf6.383373dd.js.map