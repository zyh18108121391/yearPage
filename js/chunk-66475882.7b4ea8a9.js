(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66475882"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"303b":function(e,t,a){"use strict";a("ffb9")},"35f3":function(e,t,a){"use strict";a("a9e3"),a("d3b7"),a("25f0");var n,o,i=a("b3f6"),c={name:"table-common",props:{tableData:{type:Array,default:function(){return[]}},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageNum:{type:Number,default:1}},data:function(){return{replayId:""}},methods:{headSpanFit:function(e,t){var a=t.column,n=(t.index,a.label.length);return a.minWidth=Object(i["a"])(.14*n)+20,e("span",{class:"",style:{width:"100%"}},[a.label])},getClass:function(e){return{"在运":"green","在建":"blue","停运":"red"}[e]},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.id==this.replayId?"active-row":""},handClick:function(e,t){this.$emit("btnClick",e,t),this.replayId=t.id.toString()},handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)}}},l=c,r=a("2877"),u=Object(r["a"])(l,n,o,!1,null,null,null);t["a"]=u.exports},"534f":function(e,t,a){e.exports=a.p+"img/logo1.8cbbaa04.png"},"5a7e":function(e,t,a){"use strict";a("7db0"),a("ac1f");var n,o,i=a("5530"),c={data:function(){return{formObj:{},options:{form:{labelPosition:"left",labelWidth:"90px"},submitBtn:!1,resetBtn:!1},rule:[]}},mounted:function(){},methods:{_findRule:function(e){return this.rule.find((function(t){return t.field===e}))},down:function(){this.$emit("downHand")},search:function(){var e=this.formObj.formData(),t=Object(i["a"])({},e);for(var a in t)""!=t[a]&&void 0!=t[a]||delete t[a];this.$emit("searchHand",t)},reset:function(){this.formObj.resetFields();var e=this.formObj.model();for(var t in e){var a=e[t];"AutoCompleteQuery"==a.type&&this.formObj.exec(a.field,"clear")}this.$emit("searchHand",{})}}},l=c,r=(a("78a8"),a("2877")),u=Object(r["a"])(l,n,o,!1,null,null,null);t["a"]=u.exports},"78a8":function(e,t,a){"use strict";a("f640")},"841c":function(e,t,a){"use strict";var n=a("d784"),o=a("825a"),i=a("1d80"),c=a("129f"),l=a("14c3");n("search",1,(function(e,t,a){return[function(t){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a):new RegExp(t)[e](String(a))},function(e){var n=a(t,e,this);if(n.done)return n.value;var i=o(e),r=String(this),u=i.lastIndex;c(u,0)||(i.lastIndex=0);var s=l(i,r);return c(i.lastIndex,u)||(i.lastIndex=u),null===s?-1:s.index}]}))},"90fc":function(e,t,a){},"93e2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[e.label?a("div",{staticClass:"clearfix"},[a("span",[e._v(e._s(e.label))])]):e._e(),e._t("header")]},proxy:!0}],null,!0)},[e._t("default")],2)},o=[],i={name:"BoxTitle",props:{title:{type:String,default:""}},data:function(){return{}},computed:{pageTitle:function(){return this.$route.meta?this.$route.meta.title:""},label:function(){return this.title?this.title:this.pageTitle}}},c=i,l=(a("303b"),a("2877")),r=Object(l["a"])(c,n,o,!1,null,"cb4b73a2",null);t["a"]=r.exports},ae24:function(e,t,a){"use strict";a("7db0");var n,o,i=a("fb6e"),c={extends:i["a"],name:"index-parent",data:function(){return{doType:"编辑",formObj:{},options:{form:{labelPosition:"left",labelWidth:"90px"},submitBtn:!1,resetBtn:!1},rule:[],currEditRow:""}},methods:{handleClose:function(){this.dialogShow=!1},_findRule:function(e){return this.rule.find((function(t){return t.field===e}))},notice:function(){this.dialogShow=!1,this.loading=!1,this.$notify({title:"成功",message:"操作成功",type:"success",duration:3e3}),this.reloadTable()}}},l=c,r=a("2877"),u=Object(r["a"])(l,n,o,!1,null,null,null);t["a"]=u.exports},b3f6:function(e,t,a){"use strict";var n=function(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(t){var a=t/1920*100;return e*a}};t["a"]=n},bf0b:function(e,t,a){"use strict";a("ec31")},cb777:function(e,t,a){"use strict";a("90fc")},da37:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BoxTitle",[a("SearchInputs",{on:{searchHand:e.searchHand,add:e.addHand}}),a("Table",{attrs:{tableData:e.tableData,pageNum:e.page.pageNum,pageSize:e.page.pageSize,total:e.total},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange,btnClick:e.btnClick}}),a("el-dialog",{attrs:{title:"new"==e.currEditRow?"新增户号":"编辑户号","custom-class":"cusDialog search",visible:this.dialogShow,width:"5rem","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(this,"dialogShow",t)}}},[a("form-create",{attrs:{rule:e.rule,option:e.options},on:{"main-gc-acc-select":e.handleSelectMainGc,"gl-code-select":e.handleSelectGl,"company-select":e.handleSelectCompany},model:{value:e.formObj,callback:function(t){e.formObj=t},expression:"formObj"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submit}},[e._v("确 定")]),a("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)],1)],1)},o=[],i=(a("99af"),a("4de4"),a("c975"),a("d81d"),a("b0c0"),a("ac1f"),a("841c"),a("5530")),c=a("93e2"),l=a("ae24"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cus-table",staticStyle:{width:"100%"}},[a("el-table",{attrs:{"row-key":"index",data:e.tableData,"header-cell-style":{background:"#E6EAFE",color:"#606266"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"90"}}),a("el-table-column",{attrs:{label:"户号",prop:"gcAccount"}}),a("el-table-column",{attrs:{label:"主户号",prop:"mainGcAcc"}}),a("el-table-column",{attrs:{label:"缴费主体",prop:"payer"}}),a("el-table-column",{attrs:{label:"线路名称",prop:"glName",width:"300","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"供电公司",prop:"company",width:"300","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"备注",prop:"remark",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"cusTable",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cus-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return e.handClick("编辑",t.row)}}},[e._v("编辑 ")])]}}])})],1),a("div",{staticClass:"page pagination-box"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},u=[],s=a("35f3"),d=a("534f"),f=a.n(d),m={extends:s["a"],data:function(){return{defaultImg:f.a}}},p=m,h=(a("cb777"),a("2877")),b=Object(h["a"])(p,r,u,!1,null,"5a5ebdea",null),g=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[a("form-create",{attrs:{rule:e.rule,option:e.options},on:{"btn-search":e.search,"btn-reset":e.reset},model:{value:e.formObj,callback:function(t){e.formObj=t},expression:"formObj"}}),a("div",{staticClass:"li"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新 增")])],1)],1)},y=[],O=a("5a7e"),j=a("4bda"),w={extends:O["a"],props:{},data:function(){return{options:{form:{labelPosition:"left",labelWidth:"70px"},submitBtn:!1,resetBtn:!1},rule:[{type:"input",field:"gcAcc",title:"户号：",value:"",props:{placeholder:"请输入户号"},col:{span:6}},{type:"input",field:"payer",title:"缴费主体：",value:"",props:{placeholder:"请输入缴费主体"},col:{span:6}},{type:"AutoCompleteQuery",field:"glCode",title:"线路：",props:{placeholder:"请输入线路名称搜索",fieldValue:"code",fieldLabel:"name",value:"",queryFunc:function(e){var t={pageNum:1,pageSize:20,_loading:!1};return""!==e&&(t.name=e),Object(j["o"])(t).then((function(e){if(e.rows){var t=e.rows.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{value:e.name})}));return t}return[]}))}},col:{span:6}},{type:"SubmitBtns",field:"btn",emit:["search","reset"],col:{span:6}}]}},mounted:function(){},methods:{search:function(){var e=this.formObj.formData(),t=Object(i["a"])({},e);for(var a in t)""!=t[a]&&void 0!=t[a]||delete t[a];this.$emit("searchHand",t)},add:function(){this.$emit("add")}}},C=w,x=(a("bf0b"),Object(h["a"])(C,v,y,!1,null,null,null)),S=x.exports,N=(a("3de1"),{extends:l["a"],name:"gcAccount",components:{BoxTitle:c["a"],SearchInputs:S,Table:g},data:function(){var e=this;return{rule:[{type:"input",field:"gcAccount",title:"户号：",value:"",props:{placeholder:"请输入户号"},on:{change:function(t){console.log(t),e.accountSelf&&(e.formObj.form.mainGcAcc=t,e.formObj.exec("mainGcAcc","setLabel",t))}},validate:[{required:!0,message:"请输入户号",trigger:"change"}],col:{span:24}},{type:"AutoCompleteQuery",field:"mainGcAcc",title:"主户号：",value:"",props:{placeholder:"请选择户号或输入主户搜索",fieldValue:"gcAccount",fieldLabel:"gcAccount",value:"0",queryFunc:function(t){var a={pageNum:1,pageSize:10,_loading:!1};return""!==t?a.gcAcc=t:e.formObj.bind().mainGcAcc="",Object(j["H"])(a).then((function(t){if(t.rows){var a=e.formObj.getValue("gcAccount"),n=t.rows.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{value:"".concat(e.gcAccount," ").concat(e.glName?"【".concat(e.glName,"】"):"")})}));return"new"!==e.currEditRow&&(n=n.filter((function(t){return t.gcAccount!=e.currEditRow.gcAccount}))),a?[{gcAccount:a,value:"".concat(a,"【自己】")}].concat(n):n}return[]}))}},validate:[{required:!0,message:"请输入主户号",trigger:"change"}],emit:["select"],col:{span:24}},{type:"AutoCompleteQuery",field:"company",title:"供电公司：",props:{placeholder:"请输入公司名称搜索",fieldValue:"code",fieldLabel:"name",value:"",queryFunc:function(t){var a={pageNum:1,pageSize:20,_loading:!1};return""!==t?a.keyWord=t:e.formObj.bind().company="",Object(j["l"])(a).then((function(t){if(t.rows){var a=t.rows.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{value:e.name})}));return a.length||(e.formObj.bind().company=""),a}return[]}))}},emit:["select"],col:{span:24}},{type:"AutoCompleteQuery",field:"glCode",title:"线路：",props:{placeholder:"请输入线路名称搜索",fieldValue:"code",fieldLabel:"name",value:"",queryFunc:function(t){var a={pageNum:1,pageSize:20,_loading:!1},n=e.formObj.formData(),o=n.company;return""!==t?a.name=t:e.formObj.bind().glCode="",""!==o&&(a.gCompanyCode=o),Object(j["o"])(a).then((function(t){if(t.rows){var a=t.rows.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{value:e.name})}));return a.length||(e.formObj.bind().glCode=""),a}return[]}))}},emit:["select"],col:{span:24}},{type:"input",field:"payer",title:"缴费主体：",value:"",props:{placeholder:"请输入缴费主体"},validate:[{required:!0,message:"请输入缴费主体",trigger:"change"}],col:{span:24}},{type:"input",field:"remark",title:"备注：",value:"",props:{placeholder:"请输入备注"},col:{span:24}}],glName:"",companyName:""}},methods:{addHand:function(){var e=this;"new"!==this.currEditRow?(this.currEditRow="new",this.dialogShow=!0,this.$nextTick((function(){e.formObj.resetFields(),setTimeout((function(){e.formObj.clearValidateState()}),0),e.formObj.disabled(!1,"gcAccount"),e.formObj.exec("mainGcAcc","setLabel","")}))):this.dialogShow=!0},btnClick:function(e,t){var a=this;this.currEditRow=t,this.dialogShow=!0,this.$nextTick((function(){t.company&&a.getCompanyCodeByName(t.company),a.formObj.resetFields();var e=a.formObj.form;for(var n in t)e[n]=t[n];a.formObj.disabled(!0,"gcAccount"),a.formObj.exec("mainGcAcc","setLabel",t.mainGcAcc),a.formObj.exec("glCode","setLabel",t.glName),a.formObj.exec("company","setLabel",t.company),a.companyName=t.company,a.glName=t.glName}))},getCompanyCodeByName:function(e){var t=this;Object(j["l"])({keyWord:e,_loading:!1}).then((function(e){e.rows&&e.rows.length&&(t.formObj.form.company=e.rows[0].code)}))},_getData:function(){var e=this;Object(j["H"])(Object(i["a"])(Object(i["a"])({},this.page),this.search)).then((function(t){e.tableData=t.rows,e.total=t.total}))},submit:function(){var e=this;this.formObj.validate((function(t,a){if(t){var n=e.formObj.formData();e.loading=!0,n.company||(e.companyName=""),n.glCode||(e.glName=""),"new"!==e.currEditRow?Object(j["Mb"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},e.currEditRow),n),{},{company:e.companyName,glName:e.glName})).then((function(){e.reset(),e.notice()})).catch((function(t){return e.loading=!1,!1})):Object(j["Lb"])(Object(i["a"])(Object(i["a"])({},n),{},{company:e.companyName,glName:e.glName})).then((function(){e.reset(),e.notice()})).catch((function(t){return e.loading=!1,!1}))}}))},reset:function(){var e=this;this.formObj.resetFields(),this.glName="",this.companyName="",this.formObj.exec("mainGcAcc","clear"),this.formObj.exec("company","clear"),this.formObj.exec("glCode","clear"),setTimeout((function(){e.formObj.clearValidateState()}),0)},handleSelectCompany:function(e,t){this.companyName=t.name,this.formObj.exec("glCode","clear"),this.glName=""},handleSelectMainGc:function(e,t){this.accountSelf=-1!=t.value.indexOf("自己"),this.formObj.validateField("mainGcAcc",(function(){}))},handleSelectGl:function(e,t){this.glName=t.name}},activated:function(){this._getData()},deactivated:function(){this.tableData=[]}}),_=N,A=(a("e5385"),Object(h["a"])(_,n,o,!1,null,"14ad28cb",null));t["default"]=A.exports},dcaf:function(e,t,a){},e5385:function(e,t,a){"use strict";a("dcaf")},ec31:function(e,t,a){},f640:function(e,t,a){},fb6e:function(e,t,a){"use strict";a("ac1f"),a("841c");var n,o,i=a("ed08"),c={name:"TableCommon",data:function(){return{dialogShow:!1,loading:!1,tableData:[],total:0,page:{pageNum:1,pageSize:10},search:{}}},mounted:function(){this._getData&&(this._getData=Object(i["b"])(this._getData.bind(this),100),this._getData(this.page))},methods:{handleClose:function(){this.dialogShow=!1},handleSizeChange:function(e){this.page.pageSize!==e&&(this.page.pageSize=e,this._getData())},handleCurrentChange:function(e){this.page.pageNum!==e&&(this.page.pageNum=e,this._getData())},reloadTable:function(){this._getData()},searchHand:function(e){this.page.pageNum=1,this.search=e,this._getData()}},activated:function(){this._getData()},deactivated:function(){this.tableData=[]}},l=c,r=a("2877"),u=Object(r["a"])(l,n,o,!1,null,null,null);t["a"]=u.exports},ffb9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-66475882.7b4ea8a9.js.map